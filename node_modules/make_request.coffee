http = require('http')
host_ip = 'localhost'
makeRequest = (json, url="/",dest_port=3000) ->
  #setup
  body = JSON.stringify(json)
  options = {host:host_ip, port:dest_port, path:url, method: 'POST', headers: {
    "Content-Type": "application/json",
    "Content-Length": body.length}}
  request_cb = (r)->
    r.on('data', (d)->
      console.log("post ok"))
  error_cb = (e)->
    console.log('error posting: '+e)
  #write json and close stream
  request = http.request(options, request_cb).on('error', error_cb)
  request.end(body)

module.exports = makeRequest
